configfile: "config.yaml"

outdir = config["data"]["outdir"]
raxml_command = config["parameters"]["raxml-ng"]["command"]
blmin_opts = config["parameters"]["raxml-ng"]["blmin"]
blmax_opts = config["parameters"]["raxml-ng"]["blmax"]

file_name = "blmin_{blmin}_blmax_{blmax}"
base_dir = "result_blmin_{blmin}_blmax_{blmax}/"
full_dir = "{outdir}/" + base_dir
full_file_path = full_dir + file_name

rule all:
    input:
        # best Tree and its model
        expand(f"{full_file_path}.raxml.bestTree", blmin=blmin_opts, blmax=blmax_opts, outdir=outdir),
        expand(f"{full_file_path}.raxml.bestModel", blmin=blmin_opts, blmax=blmax_opts, outdir=outdir),

        # all trees
        expand(f"{full_file_path}.raxml.mlTrees", blmin=blmin_opts, blmax=blmax_opts, outdir=outdir),

        # pairwise rf distances for all trees found for one combination of parameters
        expand(f"{full_file_path}.raxml.rfDistances", blmin=blmin_opts, blmax=blmax_opts, outdir=outdir),

        # file that contains all trees for all parameter option
        expand("{outdir}/mltrees", outdir=outdir),

        # pairwise rf distances for all trees
        expand("{outdir}/mltrees.raxml.rfDistances", outdir=outdir)


include: "rules/tree_search.smk"
include: "rules/rf_distances.smk"
